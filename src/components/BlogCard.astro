---
import type { CollectionEntry } from 'astro:content'

import FormattedDate from './FormattedDate.astro'
import { calculateReadingTime } from '../utils/readingTime'

interface Props {
  post: CollectionEntry<'blog'>
}

const { post } = Astro.props

const { data, body } = post

const { slug, title, description, updatedDate } = data

const readingTime = calculateReadingTime(body ?? '')
---

<a href={`/blog/${slug}`} class="block">
  <article
    class="group flex items-start justify-between gap-8 p-6 transition-colors hover:bg-gray-50"
  >
    <FormattedDate
      date={updatedDate}
      class="min-w-25 pt-1 text-sm whitespace-nowrap text-gray-500"
    />

    <div class="flex-1 space-y-2">
      <h2 class="text-xl font-medium transition-colors group-hover:text-gray-600">
        {title}
      </h2>

      <p class="text-sm text-gray-600">{description}</p>

      <div class="inline-flex items-center gap-2 text-gray-700">
        <span>Read article</span>

        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 20 20"
          fill="currentColor"
          class="size-5 transition-transform group-hover:translate-x-1"
        >
          <path
            fill-rule="evenodd"
            d="M3 10a.75.75 0 0 1 .75-.75h10.638L10.23 5.29a.75.75 0 1 1 1.04-1.08l5.5 5.25a.75.75 0 0 1 0 1.08l-5.5 5.25a.75.75 0 1 1-1.04-1.08l4.158-3.96H3.75A.75.75 0 0 1 3 10Z"
            clip-rule="evenodd"></path>
        </svg>
      </div>
    </div>

    <div class="hidden pt-1 text-sm whitespace-nowrap text-gray-500 sm:block">
      {readingTime} min read
    </div>
  </article>
</a>
